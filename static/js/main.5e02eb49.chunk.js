(this["webpackJsonpweather-ui"]=this["webpackJsonpweather-ui"]||[]).push([[0],{20:function(t,e,c){},30:function(t,e,c){},39:function(t,e,c){},45:function(t,e,c){},63:function(t,e,c){},64:function(t,e,c){},65:function(t,e,c){"use strict";c.r(e);var n=c(0),a=c(1),i=c.n(a),o=c(31),s=c.n(o),r=(c(39),c(3)),l=c(12),u=c(10),d=c(9),j=c(2),h={BASE:"/",DETAIL:"detail"},f=(c(20),function(t){var e=t.weather,c=Object(j.e)();return e?Object(n.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:20,cursor:"pointer"},onClick:function(){e&&c.push({pathname:"".concat(h.BASE).concat(h.DETAIL,"/").concat(e.location.name),state:e})},children:[Object(n.jsx)("img",{src:e.current.condition.icon,alt:"weather-icon",style:{width:32}}),e.current.temp_c.toFixed(0),"\xb0C"," ".concat(e.location.name,", ").concat(e.location.country)]}):null}),m=(c(45),c(33)),b=c.n(m).a.create({baseURL:"https://api.weatherapi.com/v1/",timeout:3e3});b.defaults.params={},b.defaults.params.key="41a3e4d0c8414773969125202200812";var O,v=function(t){return b.get(t)},x=["Tokyo","Delhi","Shanghai","Sao Paulo","Mexico City","Dhaka","Cairo","Beijing","Mumbai","Osaka-Shi","Karachi","Chongqing","Istanbul","Buenos Aires","Kolkata"],g="FAVORITES",p="note_",y="TOP_CITIES",S="|",w=function(){var t,e=localStorage.getItem(y);return null===e?(t=x.sort((function(t,e){return t.localeCompare(e)})),localStorage.setItem(y,t.join(S))):t=e.split(S),t},C=function(t){var e=localStorage.getItem(t);if(e){var c=JSON.parse(e);if((new Date).getTime()/1e3-c.location.localtime_epoch<3600)return new Promise((function(t){t({status:200,data:c})}))}return v(function(t){return"/current.json?q=".concat(t)}(t))},N=function(t,e){e&&localStorage.setItem(e,JSON.stringify(t)),t.location.name!==e&&localStorage.setItem(t.location.name,JSON.stringify(t))},E=function(t){var e=localStorage.getItem(y);if(e){var c=e.split(S),n=c.indexOf(t);-1!==n&&(c.splice(n,1),localStorage.setItem(y,c.join(S)))}},I=function(){var t,e=localStorage.getItem(g);return e?t=e.split("|"):(t=[],localStorage.setItem(g,"")),t.sort((function(t,e){return t.localeCompare(e)}))},k=function(t){var e,c=localStorage.getItem(g);(e=c?c.split(S):[]).push(t),localStorage.setItem(g,e.join(S))},A=function(t){var e=localStorage.getItem(g);if(e){var c=e.split(S),n=c.indexOf(t);-1!==n&&(c.splice(n,1),localStorage.setItem(g,c.join(S)))}},F=function(t){return t?localStorage.getItem(p+t):null},D=function(t,e){localStorage.setItem(p+t,e)},T=function(t){return v(function(t){return"/search.json?q=".concat(t)}(t))},_=c.p+"static/media/search.812c11b6.svg",L=function(t){var e=t.onSearch,c=Object(a.useState)(),i=Object(r.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)(),u=Object(r.a)(l,2),d=u[0],j=u[1],h=Object(a.useState)(!1),f=Object(r.a)(h,2),m=f[0],b=f[1],O=Object(a.useState)(),v=Object(r.a)(O,2),x=v[0],g=v[1],p=function(t){if(j([]),t&&200===t.status&&t.data){var e=t.data;e.length>0&&j(function(t){return t&&t.length>0?t.map((function(t){return t.name})):[]}(e))}},y=function(t){s(t),b(!1),e(t)};return Object(n.jsxs)("div",{className:"search-bar-ctn",children:[Object(n.jsx)("img",{src:_,alt:"search",style:{opacity:.5,margin:"0 8px 0 12px",cursor:"pointer"},onClick:function(){return o&&e(o)}}),Object(n.jsx)("input",{className:"search-bar-input",value:o,placeholder:"Search City",onChange:function(t){var e;s(t.target.value),e=t.target.value,clearTimeout(x),g(setTimeout((function(){T(e).then(p).catch((function(){return j([])}))}),500))},onKeyPress:function(t){13===(t.keyCode||t.which)&&o&&e(o)},onFocus:function(){return b(!0)},onBlur:function(){return setTimeout((function(){return b(!1)}),400)}}),d&&d.length>0&&m&&Object(n.jsx)("ul",{className:"search-hint-ctn",children:d?d.map((function(t,e){return Object(n.jsx)("li",{className:"hint-item",onClick:function(){return y(t)},children:t},e)})):null})]})},B="location-viewed",V=function(){var t=Object(a.useState)(),e=Object(r.a)(t,2),c=e[0],i=e[1],o=Object(a.useState)(!!localStorage.getItem(B)),s=Object(r.a)(o,2),l=s[0],u=s[1],m=Object(a.useState)(),b=Object(r.a)(m,2),O=b[0],v=b[1],x=Object(j.e)();Object(a.useEffect)((function(){window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition((function(t){C("".concat(t.coords.latitude,", ").concat(t.coords.longitude)).then(g(!0))}))}),[]);var g=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){e&&200===e.status&&e.data&&e.data.current?(N(e.data),t&&v(e.data),t&&l||(u(!0),localStorage.setItem(B,"viewed"),x.push({pathname:"".concat(h.BASE).concat(h.DETAIL,"/").concat(e.data.location.name),state:e.data}))):p()}},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;x.push({pathname:"".concat(h.BASE).concat(h.DETAIL,"/").concat(t),state:null})};return Object(n.jsx)("header",{className:"header-ctn",children:Object(n.jsxs)("div",{className:"header-content",children:[Object(n.jsxs)("div",{style:{display:"flex",height:"100%"},children:[Object(n.jsx)(d.b,{to:"/",exact:!0,activeClassName:"header-active",className:"header-menu",children:"Home"}),Object(n.jsx)(d.b,{activeClassName:"header-active",className:"header-menu",style:{marginLeft:20},to:"/detail",children:"Detail Page"})]}),Object(n.jsxs)("div",{style:{display:"flex"},children:[Object(n.jsx)(f,{weather:O}),Object(n.jsx)(L,{onSearch:function(t){t&&(i(t),C(t).then(g()).catch((function(e){p(t)})))}})]})]})})},R=(c(63),function(t){var e=t.className;return Object(n.jsx)("svg",{height:"24",width:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:e,children:Object(n.jsx)("path",{fill:"#57585a",d:"M17 1c3.852 0 7 3.148 7 7 0 3.858-2.067 7.513-5.44 10.724C16.158 21.01 13.04 23 12 23s-4.158-1.99-6.56-4.276C2.067 15.514 0 11.858 0 8c0-3.852 3.148-7 7-7 1.917 0 3.688.79 5 2.13C13.312 1.79 15.083 1 17 1zm0 2c-1.677 0-3.205.854-4.176 2.267a1 1 0 0 1-1.648 0C10.205 3.854 8.676 3 7 3 4.252 3 2 5.252 2 8c0 3.215 1.804 6.406 4.82 9.276C8.86 19.218 11.652 21 12 21c.347 0 3.14-1.782 5.18-3.724C20.197 14.406 22 11.215 22 8c0-2.748-2.252-5-5-5z"})})}),P=function(t){var e=t.className;return Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:e,children:Object(n.jsx)("path",{fill:"#FF2636",d:"M17 1c3.852 0 7 3.148 7 7 0 3.858-2.067 7.513-5.44 10.724C16.158 21.01 13.04 23 12 23s-4.158-1.99-6.56-4.276C2.067 15.514 0 11.858 0 8c0-3.852 3.148-7 7-7 1.917 0 3.688.79 5 2.13C13.312 1.79 15.083 1 17 1z"})})};!function(t){t.ADD_FAV="ADD_FAV",t.REMOVE_FAV="REMOVE_FAV"}(O||(O={}));var M=function(t){var e=t.name,c=i.a.useContext(X),a=c.state,o=c.dispatch,s=a.favs;return Object(n.jsxs)("div",{className:"like-ctn",onClick:function(t){t.stopPropagation(),-1!==s.indexOf(e)?o({type:O.REMOVE_FAV,payload:e}):o({type:O.ADD_FAV,payload:e})},children:[Object(n.jsx)(P,{className:-1!==s.indexOf(e)?"active":"in-active"}),Object(n.jsx)(R,{className:-1!==s.indexOf(e)?"in-active":"active"})]})},z=(c(64),c.p+"static/media/close.d1a6d0d8.svg"),W=function(t){var e=t.label,c=t.cities,a=t.onItemRemove,i=Object(j.e)();return Object(n.jsxs)("div",{style:{margin:"24px 0"},children:[Object(n.jsx)("div",{className:"city-list-header-ctn",children:e}),Object(n.jsx)("div",{className:"city-list",children:c&&c.length>0?c.map((function(t,e){return Object(n.jsxs)("div",{className:"city-card",onClick:function(){return function(t){i.push({pathname:"".concat(h.BASE).concat(h.DETAIL,"/").concat(t.location.name),state:t})}(t)},children:[Object(n.jsxs)("div",{className:"city-card-content",children:[Object(n.jsxs)("div",{style:{flex:1},children:[t.location.name,", ",Object(n.jsx)("br",{}),t.location.country]}),Object(n.jsx)("img",{src:t.current.condition.icon,alt:"weather-icon",className:"city-weather-icon"}),Object(n.jsxs)("span",{style:{fontSize:36,width:80},children:[t.current.temp_c.toFixed(0),"\xb0C"]})]}),Object(n.jsxs)("div",{className:"city-card-action-ctn",children:[Object(n.jsx)(M,{name:t.location.name}),a&&Object(n.jsx)("img",{src:z,alt:"close",className:"city-remove",onClick:function(e){return function(t,e){t.stopPropagation(),a&&a(e)}(e,t.location.name)}})]})]},e)})):Object(n.jsx)("p",{style:{opacity:.5,margin:"0 0 24px 24px"},children:"Empty list"})})]})},H=c.p+"static/media/liked.38eb2764.svg",J=function(){var t=Object(a.useState)([]),e=Object(r.a)(t,2),c=e[0],o=e[1],s=Object(a.useState)([]),d=Object(r.a)(s,2),j=d[0],h=d[1],f=i.a.useContext(X).state;Object(a.useEffect)((function(){w().forEach((function(t){t&&C(t).then((function(e){e&&200===e.status&&e.data&&e.data.current&&(o((function(t){return[].concat(Object(l.a)(t),[e.data])})),N(e.data,t))}))}))}),[]),Object(a.useEffect)((function(){h([]),f.favs.forEach((function(t){C(t).then((function(t){t&&200===t.status&&t.data&&t.data.current&&(h((function(e){return[].concat(Object(l.a)(e),[Object(u.a)(Object(u.a)({},t.data),{},{like:!0})]).sort((function(t,e){return t.location.name>e.location.name?1:-1}))})),N(t.data))}))}))}),[f.favs]);return Object(n.jsxs)("div",{children:[Object(n.jsx)(W,{label:Object(n.jsxs)(n.Fragment,{children:["Favorites",Object(n.jsx)("img",{src:H,alt:"like",style:{width:24,marginLeft:16}})]}),cities:j}),Object(n.jsx)(W,{label:"Top Cities",cities:c,onItemRemove:function(t){E(t),o((function(e){return e.filter((function(e){return e.location.name!==t}))}))}})]})},q=(c(30),function(t){var e=t.note,c=t.onSave,i=t.editing,o=Object(a.useState)(e),s=Object(r.a)(o,2),l=s[0],u=s[1];Object(a.useEffect)((function(){u(e)}),[e]);return Object(n.jsxs)("div",{style:{display:"flex",alignItems:"flex-end"},children:[i||""!==l?Object(n.jsx)("textarea",{placeholder:"your note here...",className:"text-area",rows:3,cols:50,onChange:function(t){u(t.target.value)},disabled:!i,value:l||""}):null,i&&Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"button-remove",onClick:function(){c(""),u("")},children:"Remove"}),Object(n.jsx)("button",{className:"button-save",onClick:function(){c(l)},children:"Save"})]})]})}),K=c.p+"static/media/note.dfee6669.png",U=function(){return Object(n.jsx)("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",style:{width:160},children:Object(n.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})})},G=function(t){var e=Object(j.f)().name,c=t.location.state,i=Object(a.useState)(c),o=Object(r.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(F(null===s||void 0===s?void 0:s.location.name)),d=Object(r.a)(u,2),h=d[0],f=d[1],m=Object(a.useState)(null===F(null===s||void 0===s?void 0:s.location.name)),b=Object(r.a)(m,2),O=b[0],v=b[1],x=Object(a.useState)(!1),g=Object(r.a)(x,2),p=g[0],y=g[1];Object(a.useEffect)((function(){l(c)}),[c]),Object(a.useEffect)((function(){y(!1),!s&&e&&C(e).then((function(t){if(t&&200===t.status&&t.data&&t.data.current){var c=t.data;l(c),N(c,e)}else l(null)})).catch((function(){window.navigator.onLine||y(!0)}))}),[s,e]),Object(a.useEffect)((function(){(null===s||void 0===s?void 0:s.location.name)&&f(F(s.location.name))}),[null===s||void 0===s?void 0:s.location.name]);var S=function(t,e){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(n.jsxs)("div",{className:"city-detail-row",children:[Object(n.jsx)("div",{style:{opacity:.8},children:t}),Object(n.jsxs)("div",{style:{fontSize:18,fontWeight:500},children:[e,c]})]})};return!window.navigator.onLine&&p?Object(n.jsxs)("div",{children:[Object(n.jsx)(U,{}),Object(n.jsx)("br",{}),"Please recheck your network connection"]}):s?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"detail-header-ctn",children:[Object(n.jsxs)("h2",{children:[s.location.name,", ",s.location.country]}),Object(n.jsxs)("div",{style:{display:"flex",alignItems:"center",height:19},children:[Object(n.jsx)("img",{src:K,alt:"note",className:"detail-note-icon",onClick:function(){O||v(!O)}}),Object(n.jsx)(M,{name:s.location.name})]})]}),Object(n.jsx)(q,{note:h,onSave:function(t){f(t),s&&D(s.location.name,t||""),v(!1)},editing:O}),Object(n.jsx)("p",{style:{fontSize:18,fontWeight:500,marginBottom:0},children:"CURRENT WEATHER"}),Object(n.jsx)("p",{className:"local-time",children:s.location.localtime}),Object(n.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[Object(n.jsxs)("div",{className:"city-detail-icon-ctn",children:[Object(n.jsx)("img",{src:s.current.condition.icon,alt:"weather-icon",width:150}),Object(n.jsx)("p",{style:{marginTop:8,textAlign:"center"},children:s.current.condition.text})]}),Object(n.jsxs)("div",{style:{marginLeft:16},children:[Object(n.jsxs)("div",{className:"city-detail-temp",children:[s.current.temp_c,"\xb0",Object(n.jsx)("span",{style:{fontSize:24,marginLeft:-25,opacity:.6},children:"C"})]}),Object(n.jsxs)("div",{className:"city-detail-feellike",children:["Feel Like ",s.current.feelslike_c,"\xb0"]})]})]}),Object(n.jsxs)("div",{className:"city-detail-rows-ctn",children:[S("Wind",s.current.wind_kph,"km/h"),S("Wind Degree",s.current.wind_degree,Object(n.jsx)(n.Fragment,{children:"\xb0C"})),S("Wind Direction",s.current.wind_dir),S("Pressure",s.current.pressure_mb,"mb"),S("Humidity",s.current.humidity,"%"),S("Cloud Cover",s.current.cloud,"%"),S("UV Index",s.current.uv),S("Visibility",s.current.vis_km,"km")]})]}):Object(n.jsx)("div",{children:"No result"})},Q={favs:I()},X=i.a.createContext({state:Q,dispatch:function(){return null}}),Y=function(t,e){switch(e.type){case O.ADD_FAV:return k(e.payload),Object(u.a)(Object(u.a)({},t),{},{favs:[].concat(Object(l.a)(t.favs),[e.payload])});case O.REMOVE_FAV:A(e.payload);var c=Object(l.a)(t.favs);return c.splice(c.indexOf(e.payload),1),Object(u.a)(Object(u.a)({},t),{},{favs:c});default:return t}},Z=function(){var t=i.a.useReducer(Y,Q),e=Object(r.a)(t,2),c=e[0],a=e[1];return Object(n.jsx)(X.Provider,{value:{state:c,dispatch:a},children:Object(n.jsx)(d.a,{children:Object(n.jsxs)("div",{className:"app-ctn",children:[Object(n.jsx)(V,{}),Object(n.jsxs)("div",{className:"app-content",children:[Object(n.jsx)(j.a,{path:"/",exact:!0,component:J}),Object(n.jsx)(j.a,{path:"".concat(h.BASE).concat(h.DETAIL,"/:name"),component:G})]})]})})})},$=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,66)).then((function(e){var c=e.getCLS,n=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;c(t),n(t),a(t),i(t),o(t)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(Z,{})}),document.getElementById("root")),$()}},[[65,1,2]]]);
//# sourceMappingURL=main.5e02eb49.chunk.js.map